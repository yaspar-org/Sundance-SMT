(declare-sort o 0)
(declare-sort P 0)
(declare-fun I (Int) P)
(declare-sort T 0)
(declare-sort D 0)
(declare-const $ D)
(declare-sort vs 0)
(declare-sort Linked 0)
(declare-sort Link 0)
(declare-sort Li 0)
(declare-sort in 0)
(declare-sort B 0)
(declare-fun o (o) P)
(declare-fun ib (Linked) Link)
(declare-fun f (Linked) B)
(declare-fun lib (Li) vs)
(declare-fun ib! (in) o)
(declare-fun l (in) Li)
(declare-const Y T)
(declare-fun Po (vs) P)
(declare-fun P (o) P)
(declare-fun %P (P) o)
(declare-fun b (B) P)
(declare-fun n (Linked) P)
(declare-fun % (P) Linked)
(declare-fun ol (Li) P)
(declare-fun %Po (P) in)
(declare-fun Pol (Link) P)
(assert (forall ((x Linked)) (! (= x (% (n x))) :pattern ((n x)))))
(declare-fun v (P) P)
(declare-fun vs (D T P P) Bool)
(declare-fun st (P P) P)
(declare-fun li (P) Int)
(declare-fun b! (P) Bool)
(declare-fun L (P P) Bool)
(declare-fun in (P) Bool)
(declare-fun im (P) Bool)
(declare-fun Li (P P) Linked)
(declare-fun i (P) Linked)
(assert (forall ((s P)) (! (= (b! s) (L (b (f (% s))) (I (li (Pol (ib (% s))))))) :pattern ((b! s)))))
;(assert (forall ((s P)) (! (= (in s) (forall ((a P)) (! (b! (st (Po (lib (l (%Po s)))) a)) :pattern ((vs $ Y (v (Po (lib (l (%Po s))))) a))))) :pattern ((in s)))))
;(assert (forall ((s P) (p P)) (! (vs $ Y (v (Po (lib (l (%Po s))))) (o (%P p))) :pattern ((L s p)))))
;(assert (forall ((s P)) (! (and (in (ol (l (%Po s)))) (L (ol (l (%Po s))) (P (ib! (%Po s))))) :pattern ((im s)))))
;(assert (forall ((s P) (p P)) (! (= (Li s p) (% (st (Po (lib (l (%Po s)))) (o (%P p))))) :pattern ((Li s p)))))
;(assert (forall ((s P)) (! (= (i s) (Li (ol (l (%Po s))) (P (ib! (%Po s))))) :pattern ((i s)))))
(declare-fun c (P P) Bool)
;(assert (forall ((s P) (h P)) (! (= (b! s) (c s h)) :pattern ((c s h)))))
(declare-const s P)
(declare-const m Linked)
(declare-const t P)
(assert (and (im s) (not (c (n (i s)) t)) (or (= m (i s)) (= t (b (f (% (n m))))))))


;(assert (= (i s) (% (n (i s)))))
(assert (and (in (ol (l (%Po s)))) (L (ol (l (%Po s))) (P (ib! (%Po s))))))
(assert (= (i s) (Li (ol (l (%Po s))) (P (ib! (%Po s))))))
(assert (= (b! (n (i s))) (c (n (i s)) t)))
;(assert (= (b! (n (i s))) (L (b (f (% (n (i s))))) (I (li (Pol (ib (% (n (i s))))))))))
(assert (= (in (ol (l (%Po s)))) (forall ((a P)) (! (b! (st (Po (lib (l (%Po (ol (l (%Po s))))))) a)) :pattern ((vs $ Y (v (Po (lib (l (%Po (ol (l (%Po s)))))))) a))))))
(assert (vs $ Y (v (Po (lib (l (%Po (ol (l (%Po s)))))))) (o (%P (P (ib! (%Po s)))))))
;(assert (vs $ Y (v (Po (lib (l (%Po (b (f (% (n (i s)))))))))) (o (%P (I (li (Pol (ib (% (n (i s)))))))))))
(assert (= (Li (ol (l (%Po s))) (P (ib! (%Po s)))) (% (st (Po (lib (l (%Po (ol (l (%Po s))))))) (o (%P (P (ib! (%Po s)))))))))
;(assert (b! (st (Po (lib (l (%Po (ol (l (%Po s))))))) (o (%P (P (ib! (%Po s))))))))
;(assert (= (b! (st (Po (lib (l (%Po (ol (l (%Po s))))))) (o (%P (P (ib! (%Po s))))))) (L (b (f (% (st (Po (lib (l (%Po (ol (l (%Po s))))))) (o (%P (P (ib! (%Po s))))))))) (I (li (Pol (ib (% (st (Po (lib (l (%Po (ol (l (%Po s))))))) (o (%P (P (ib! (%Po s))))))))))))))
;(assert (= m (% (n m))))
;(assert (vs $ Y (v (Po (lib (l (%Po (b (f (% (st (Po (lib (l (%Po (ol (l (%Po s))))))) (o (%P (P (ib! (%Po s)))))))))))))) (o (%P (I (li (Pol (ib (% (st (Po (lib (l (%Po (ol (l (%Po s))))))) (o (%P (P (ib! (%Po s)))))))))))))))
(check-sat)
