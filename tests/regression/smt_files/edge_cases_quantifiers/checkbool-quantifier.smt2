(declare-sort P 0)
(declare-fun B (Bool) P)
(declare-fun %B (P) Bool)
(declare-fun apply (P P) P)
(declare-fun contains (P P) Bool)
(declare-fun union (P P) P)
(declare-fun intersection (P P) P)
(declare-const s1! P)
(declare-const s2! P)
(declare-const s3! P)
(declare-const a P)
(assert (= (intersection s1! s2!) (B (%B (intersection s1! s2!)))))
(assert (= (contains (intersection s1! s2!) a) (%B (apply (intersection s1! s2!) a))))
(assert (= (contains (intersection s1! s3!) a) (%B (apply (intersection s1! s3!) a))))
(assert (= (contains (union s2! s3!) a) (%B (apply (union s2! s3!) a))))
(assert (= (contains (intersection s1! (union s2! s3!)) a) (%B (apply (intersection s1! (union s2! s3!)) a))))
(assert (= (contains (union (intersection s1! s2!) (intersection s1! s3!)) a) (%B (apply (union (intersection s1! s2!) (intersection s1! s3!)) a))))
(assert (forall ((m P) (n P) (x P)) (! (= (apply (union m n) x) (B (or (contains m x) (contains n x)))) :pattern ((apply (union m n) x)))))
(assert (forall ((m P) (n P) (x P)) (! (= (apply (intersection s1! n) x) (B (and (contains s1! x) (contains n x)))) :pattern ((apply (intersection m n) x)))))
(assert (not (= (contains (intersection s1! (union s2! s3!)) a) (contains (union (intersection s1! s2!) (intersection s1! s3!)) a))))

; these are the added assertions
;(assert (= (apply (union s2! s3!) a) (B (or (contains s2! a) (contains s3! a)))))
;(assert (= (apply (union (intersection s1! s2!) (intersection s1! s3!)) a) (B (or (contains (intersection s1! s2!) a) (contains (intersection s1! s3!) a)))))
;(assert (= (apply (intersection s1! s2!) a) (B (and (contains s1! a) (contains s2! a)))))
;(assert (= (apply (intersection s1! s3!) a) (B (and (contains s1! a) (contains s3! a)))))
;(assert (= (apply (intersection s1! (union s2! s3!)) a) (B (and (contains s1! a) (contains (union s2! s3!) a)))))

(check-sat)
