(declare-sort % 0)
(declare-sort P 0)
(declare-fun B (Bool) P)
(declare-fun % (P) Bool)
(declare-fun P (%) P)
(declare-fun %P (P) %)
(declare-fun %%apply%%0 (% P) P)
(declare-fun contains (P P) Bool)
(declare-fun union (P P) P)
(declare-fun intersection (P P) P)
(declare-const s1! P)
(declare-const s2! P)
(declare-const s3! P)
(declare-fun %%lambda%%0 (P P) %)
(declare-fun %%lambda%%1 (P P) %)
(declare-const a P)
(assert (= (%%lambda%%0 s2! s3!) (%P (P (%%lambda%%0 s2! s3!)))))
(assert (= (%%lambda%%0 (intersection s1! s2!) (intersection s1! s3!)) (%P (P (%%lambda%%0 (intersection s1! s3!) (intersection s1! s3!))))))
(assert (= (%%lambda%%1 s1! (union s2! s3!)) (%P (P (%%lambda%%1 s1! (union s2! s3!))))))
(assert (= (%%lambda%%1 s1! s2!) (%P (P (%%lambda%%1 s1! s3!)))))
(assert (= (%%lambda%%1 s1! s3!) (%P (P (%%lambda%%1 s1! s3!)))))
(assert (= (contains (intersection s1! s3!) a) (% (%%apply%%0 (%P (intersection s1! s3!)) a))))
(assert (= (contains (union s2! s3!) a) (% (%%apply%%0 (%P (union s2! s3!)) a))))
(assert (= (contains (intersection s1! (union s2! s3!)) a) (% (%%apply%%0 (%P (intersection s1! (union s2! s3!))) a))))
(assert (= (contains (intersection s1! s3!) a) (% (%%apply%%0 (%P (union (intersection s1! s3!) (intersection s1! s3!))) a))))
(assert (forall ((% P) (%% P) (x P)) (! (= (%%apply%%0 (%%lambda%%0 % %%) x) (B (or (contains % x) (contains %% x)))) :pattern ((%%apply%%0 (%%lambda%%0 % %%) x)))))
(assert (= (union s2! s3!) (P (%%lambda%%0 s2! s3!))))
(assert (= (union (intersection s1! s3!) (intersection s1! s3!)) (P (%%lambda%%0 (intersection s1! s3!) (intersection s1! s3!)))))
(assert (forall ((% P) (%% P) (x P)) (! (= (%%apply%%0 (%%lambda%%1 s1! %%) x) (B (and (contains s1! x) (contains %% x)))) :pattern ((%%apply%%0 (%%lambda%%1 % %%) x)))))
(assert (= (intersection s1! (union s2! s3!)) (P (%%lambda%%1 s1! (union s2! s3!)))))
(assert (= (intersection s1! s2!) (P (%%lambda%%1 s1! s3!))))
(assert (= (intersection s1! s3!) (P (%%lambda%%1 s1! s3!))))
(assert (not (= (contains (intersection s1! s3!) a) (contains (intersection s1! (union s2! s3!)) a))))
(check-sat)
