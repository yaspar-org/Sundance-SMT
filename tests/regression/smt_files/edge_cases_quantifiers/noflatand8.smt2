(declare-sort %% 0)
(declare-sort P 0)
(declare-fun I (Int) P)
(declare-fun B (Bool) P)
(declare-fun % (P) Int)
(declare-sort T 0)
(declare-const O T)
(declare-sort D 0)
(declare-const $ D)
(declare-fun h (P T) Bool)
(assert (forall ((x Int)) (! (= x (% (I x))) :pattern ((I x)))))
(declare-sort v 0)
(declare-datatypes ((li 0) (lib 0) (ib! 0)) (((lib! (a v) (!a v) (b!a Int))) ((!s)) ((e))))
(declare-fun l (li) v)
(declare-fun i (li) v)
(declare-fun b (lib) Int)
(declare-fun li (ib!) Int)
(declare-fun ib (ib!) Int)
(declare-fun lib (ib!) Int)
(declare-fun Y (D T D T) T)
(declare-fun T (D T) T)
(declare-const TY T)
(declare-const YP T)
(declare-fun P (%%) P)
(declare-fun %P (P) %%)
(declare-fun ol (v) P)
(declare-fun Po (P) v)
(declare-fun Pol (li) P)
(declare-fun y% (P) li)
(declare-fun %Po (P) lib)
(declare-fun o (ib!) P)
(declare-fun y (P) ib!)
;(assert (forall ((x %%)) (! (= x (%P (P x))) :pattern ((P x)))))
(declare-fun %% (%% P) P)
;(assert (forall ((x P)) (! (= x (ol (Po x))) :pattern ((h x (T $ TY))))))
(declare-fun v (D T P) P)
(declare-fun vs (D T P P) Bool)
(declare-fun t (D T D T P) P)
(declare-fun ib! (P) Int)
(declare-fun b! (P P P) v)
;(assert (forall ((& D) (A T) (. D) (F T) (f P)) (! (or (h (t . TY . F f) (T . TY))) :pattern ((t & A . F f)))))
;(assert (forall ((& D) (A T) (f P) (a P)) (! (= (%% (%P f) f) (t & TY & (Y & TY & O) f)) :pattern ((vs & TY (t & TY & (Y & A & O) f) a)))))
(declare-fun %l (Int Int Int) %%)
;(assert (forall ((% Int) (h Int) (%h Int) (a P)) (! (= (%% (%l % 0 %h) a) (B (and (= 0 (b (%Po a)))))) :pattern ((%% (%l % h %h) a)))))
(assert (= (l (y% (v $ YP (o e)))) (a (y% (v $ YP (o e))))))
(assert (= (i (y% (v $ YP (o e)))) (!a (y% (v $ YP (o e))))))
(assert (= (v $ YP (o e)) (Pol (lib! (Po (ol (b! (I (lib (y (o e)))) (I 0) (I (li (y (o e))))))) (Po (ol (b! (I (lib (y (o e)))) (I 0) (I (ib (y (o e))))))) (% (I (lib (y (o e)))))))))
(assert (= (lib! (Po (ol (b! (I (lib (y (o e)))) (I 0) (I (li (y (o e))))))) (Po (ol (b! (I (lib (y (o e)))) (I 0) (I (ib (y (o e))))))) (ib! (I (lib (y (o e)))))) (y% (Pol (lib! (Po (ol (b! (I (lib (y (o e)))) (I 0) (I (li (y (o e))))))) (Po (ol (b! (I (lib (y (o e)))) (I 0) (I (ib (y (o e))))))) (% (I (lib (y (o e))))))))))
(assert (= (b! (I (lib (y (o e)))) (I 0) (I (li (y (o e))))) (Po (t $ TY $ (Y $ TY $ O) (P (%l (ib! (I (lib (y (o e))))) (% (I 0)) (ib! (I (lib (y (o e)))))))))))
(declare-const s P)
(assert (not (vs $ TY (ol (l (y% (v $ YP (o e))))) s)))
(assert (vs $ TY (ol (i (y% (v $ YP (o e))))) s))
(assert (= (b! (I (lib (y (o e)))) (I 0) (I (ib (y (o e))))) (Po (t $ TY $ (Y $ TY $ O) (P (%l (ib! (I (lib (y (o e))))) (% (I 0)) (ib! (I (li (y (o e)))))))))))

    (assert (= (lib (y (o e))) (% (I (lib (y (o e)))))))
    (assert (= (li (y (o e))) (% (I (li (y (o e)))))))
    (assert (= (%l (ib! (I (lib (y (o e))))) (% (I 0)) (ib! (I (lib (y (o e)))))) (%P (P (%l (ib! (I (lib (y (o e))))) (% (I 0)) (ib! (I (lib (y (o e))))))))))
    (assert (= (%l (ib! (I (lib (y (o e))))) (% (I 0)) (ib! (I (li (y (o e)))))) (%P (P (%l (ib! (I (lib (y (o e))))) (% (I 0)) (ib! (I (li (y (o e))))))))))
    (assert (h (t $ TY $ (Y $ TY $ O) (P (%l (ib! (I (lib (y (o e))))) (% (I 0)) (ib! (I (lib (y (o e)))))))) (T $ TY)))
    (assert (h (t $ TY $ (Y $ TY $ O) (P (%l (ib! (I (lib (y (o e))))) (% (I 0)) (ib! (I (li (y (o e)))))))) (T $ TY)))
    (assert (= (t $ TY $ (Y $ TY $ O) (P (%l (ib! (I (lib (y (o e))))) (% (I 0)) (ib! (I (lib (y (o e)))))))) (ol (Po (t $ TY $ (Y $ TY $ O) (P (%l (ib! (I (lib (y (o e))))) (% (I 0)) (ib! (I (lib (y (o e))))))))))))
    (assert (= (t $ TY $ (Y $ TY $ O) (P (%l (ib! (I (lib (y (o e))))) (% (I 0)) (ib! (I (li (y (o e)))))))) (ol (Po (t $ TY $ (Y $ TY $ O) (P (%l (ib! (I (lib (y (o e))))) (% (I 0)) (ib! (I (li (y (o e))))))))))))
    (assert (= (%% (%P (P (%l (ib! (I (lib (y (o e))))) (% (I 0)) (ib! (I (lib (y (o e)))))))) (P (%l (ib! (I (lib (y (o e))))) (% (I 0)) (ib! (I (lib (y (o e)))))))) (t $ TY $ (Y $ TY $ O) (P (%l (ib! (I (lib (y (o e))))) (% (I 0)) (ib! (I (lib (y (o e))))))))))
    (assert (= (%% (%P (P (%l (ib! (I (lib (y (o e))))) (% (I 0)) (ib! (I (li (y (o e)))))))) (P (%l (ib! (I (lib (y (o e))))) (% (I 0)) (ib! (I (li (y (o e)))))))) (t $ TY $ (Y $ TY $ O) (P (%l (ib! (I (lib (y (o e))))) (% (I 0)) (ib! (I (li (y (o e))))))))))
    (assert (= (%% (%l (ib! (I (lib (y (o e))))) 0 (ib! (I (lib (y (o e)))))) (P (%l (ib! (I (lib (y (o e))))) (% (I 0)) (ib! (I (lib (y (o e)))))))) (B (and (= 0 (b (%Po (P (%l (ib! (I (lib (y (o e))))) (% (I 0)) (ib! (I (lib (y (o e))))))))))))))
    (assert (= (%% (%l (ib! (I (lib (y (o e))))) 0 (ib! (I (li (y (o e)))))) (P (%l (ib! (I (lib (y (o e))))) (% (I 0)) (ib! (I (li (y (o e)))))))) (B (and (= 0 (b (%Po (P (%l (ib! (I (lib (y (o e))))) (% (I 0)) (ib! (I (li (y (o e))))))))))))))

(check-sat)
