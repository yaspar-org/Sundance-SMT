(declare-sort %% 0)
(declare-sort P 0)
(declare-fun B (Bool) P)
(declare-fun % (P) Bool)
(declare-sort T 0)
(declare-const O T)
(declare-sort D 0)
(declare-const $ D)
(declare-fun a (P T) Bool)
(declare-sort vs 0)
(declare-datatypes ((l 0) (i 0) (li 0) (lib 0) (ib 0) (b! 0)) (((li)) ((ib!)) ((lib! (d vs))) ((!i)) ((!k)) ((b!k (ib!k ib) (lib!k ib)))))
(declare-fun b (li) vs)
(declare-fun i (b!) ib)
(declare-fun T (T) T)
(declare-const TY T)
(declare-const Y T)
(declare-fun P (%%) P)
(declare-fun %P (P) %%)
(declare-fun Poly (vs) P)
(declare-fun %Pol (P) vs)
(declare-fun y (l) P)
(declare-fun ly (i) P)
(declare-fun oly (li) P)
(declare-fun Po (P) li)
(declare-fun o (lib) P)
(declare-fun ol (ib) P)
(declare-fun Pol (b!) P)
(declare-fun %Po (P) b!)
(declare-fun %% (%% P) P)
(declare-fun v (D T D T P) P)
(declare-fun s (D T P P) Bool)
(declare-fun vs (D T D T P P) P)
(declare-fun td (D T D T P) P)
(declare-fun t (D T D T D T P P) P)
(declare-fun l (P) i)
(declare-fun st (P P) P)
(declare-fun b! (D T P P P) Bool)
(declare-fun ib (D T P) ib)
(declare-fun lib (P P) Bool)
(declare-fun vst (D T D T P P) P)
;(assert (forall ((& D) (K T) (. D) (V T) (s P) (k P)) (! (a (vs . Y . V s s) V) :pattern ((vs & K . V s k)))))
;(assert (forall ((& D) (f P) (a P)) (! (= (% (%% (%P f) f)) (s & Y (td & Y & (T O) f) a)) :pattern ((s & Y (td & Y & (T O) f) a)))))
(declare-fun %%l (D T P D T D T P D T D T P) %%)
;(assert (forall ((% D) (h T) (%h P) (%%h D) (o T) (ho D) (%ho T) (%%ho P) (ol D) (hol T) (%hol D) (%%hol T) (l P) (k P)) (! (= (%% (%%l ol h %h ol h ol TY %%ho ol h ol TY l) k) (ite (s ol h %h k) (vst ol h ol h k k) (vs ol h ol TY k k))) :pattern ((%% (%%l % h %h %%h o ho %ho %%ho ol hol %hol %%hol l) k)))))
(declare-fun la (D T P) %%)
(declare-fun %l (P) %%)
(assert (forall ((k P)) (! (not (b! $ Y k (ol !k) (ol !k))) :pattern ((b! $ Y k (ol !k) (ol !k))))))
(assert (= (st (P (la $ Y (Pol (b!k !k !k)))) (P (%l (ly (l (o !i)))))) (t $ Y $ TY $ (T TY) (P (%l (ly (l (o !i))))) (td $ Y $ (T O) (P (la $ Y (Pol (b!k !k !k))))))))
(assert (= (td $ Y $ (T O) (P (la $ Y (Pol (b!k !k !k))))) (v $ Y $ TY (t $ Y $ TY $ (T TY) (P (%l (ly (l (o !i))))) (td $ Y $ (T O) (P (la $ Y (Pol (b!k !k !k)))))))))
(assert (= (la $ Y (Pol (b!k !k !k))) (%P (P (la $ Y (Pol (b!k !k !k)))))))
(declare-const T1 P)
(assert (a (vs $ Y $ TY T1 T1) TY))
(assert (not (or (a (%% (%%l $ Y (v $ Y $ TY (st (P (la $ Y (Pol (b!k !k !k)))) (P (%l (ly (l (o !i))))))) $ Y $ TY (P (la $ Y (Pol (b!k !k !k)))) $ Y $ TY (Poly (b (Po (oly (lib! (%Pol (y li)))))))) T1) TY))) )
(assert (= (B (lib (Pol (b!k !k !k)) (P (la $ Y (Pol (b!k !k !k)))))) (%% (la $ Y (Pol (b!k !k !k))) (P (la $ Y (Pol (b!k !k !k)))))))
(assert (= (% (B (lib (Pol (b!k !k !k)) (P (la $ Y (Pol (b!k !k !k))))))) (b! $ Y (ol (i (%Po (Pol (b!k !k !k))))) (ol (ib $ Y (Pol (b!k !k !k)))) (ol (i (%Po (Pol (b!k !k !k))))))))
(assert (= (%% (%%l $ Y (v $ Y $ TY (st (P (la $ Y (Pol (b!k !k !k)))) (P (%l (ly (l (o !i))))))) $ Y $ TY (P (la $ Y (Pol (b!k !k !k)))) $ Y $ TY (Poly (b (Po (oly (lib! (%Pol (y li)))))))) T1) (ite (s $ Y (v $ Y $ TY (st (P (la $ Y (Pol (b!k !k !k)))) (P (%l (ly (l (o !i))))))) T1) (vst $ Y $ Y T1 T1) (vs $ Y $ TY T1 T1))))
(assert (a (vs $ Y $ TY T1 T1) TY))
(assert (= (% (%% (%P (P (la $ Y (Pol (b!k !k !k))))) (P (la $ Y (Pol (b!k !k !k)))))) (s $ Y (td $ Y $ (T O) (P (la $ Y (Pol (b!k !k !k))))) T1)))
(check-sat)
