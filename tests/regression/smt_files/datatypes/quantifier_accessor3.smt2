(declare-sort %% 0)
(declare-sort F 0)
(declare-fun fuel_bool (F) Bool)
(declare-fun fuel_bool_default (F) Bool)
;(assert (forall ((i F)) (! (= (fuel_bool i) (fuel_bool_default i)) :pattern ((fuel_bool_default i)))))
(declare-sort P 0)
(declare-fun I (Int) P)
(declare-fun B (Bool) P)
(declare-fun % (P) Bool)
(declare-sort T 0)
(declare-fun UINT (Int) T)
(declare-sort D 0)
(declare-const $ D)
(declare-fun mk_fun (%%) %%)
;(assert (forall ((x %%)) (! (= (mk_fun x) x) :pattern ((mk_fun x)))))
(assert (forall ((x Bool)) (! (= x (% (B x))) :pattern ((B x)))))
(declare-const fuel%lib!kv.kvspec_t.impl&%0.check_permission. F)
(declare-sort c 0)
(declare-sort o 0)
(declare-datatypes ((lib!kv.kvspec_t.Tr 0) (lib!kv.kvspec_t.AbstractKvStoreState. 0) (tuple%0. 0) (tuple%2. 0) (tuple%6. 0)) (((lib!kv.kvspec_t.TrustedKvPermission./TrustedKvPermission (lib!kv.kvspec_t.TrustedKvPermission./TrustedKvPermission/?is_state_allowable %%) (lib!kv.kvspec_t.TrustedKvPermission./TrustedKvPermission/?_phantom o))) ((lib!kv.kvspec_t.AbstractKvStoreState./AbstractKvStoreState (lib!kv.kvspec_t.AbstractKvStoreState./AbstractKvStoreState/?id Int) (lib!kv.kvspec_t.AbstractKvStoreState./AbstractKvStoreState/?contents P) (lib!kv.kvspec_t.AbstractKvStoreState./AbstractKvStoreState/?_phantom c))) ((tuple%0./tuple%0)) ((tuple%2./tuple%2 (tuple%2./tuple%2/?0 P) (tuple%2./tuple%2/?1 P))) ((tuple%6./tuple%6 (tuple%6./tuple%6/?0 P) (tuple%6./tuple%6/?1 P) (tuple%6./tuple%6/?2 P) (tuple%6./tuple%6/?3 P) (tuple%6./tuple%6/?4 P) (tuple%6./tuple%6/?5 P)))))
; note these functions do not work for datatype
;(declare-sort lib!kv.kvspec_t.Tr 0)
;(declare-fun lib!kv.kvspec_t.TrustedKvPermission./TrustedKvPermission(%% o) lib!kv.kvspec_t.Tr)
;(declare-fun lib!kv.kvspec_t.TrustedKvPermission./TrustedKvPermission/?is_state_allowable (lib!kv.kvspec_t.Tr) %%)
(declare-fun core!option.Option./Some (P) c)
(declare-fun lib!kv.kvspec_t.TrustedKvPermission./TrustedKvPermission/is_state_allowable (lib!kv.kvspec_t.Tr) %%)
(declare-fun TYPE%vstd!seq.Seq. (D T) T)
(declare-fun TYPE%lib!kv.kvspec_t.TrustedKvPermission. (D T D T D T D T D T D T) T)
(declare-fun P (%%) P)
(declare-fun %P (P) %%)
(declare-fun o (P) c)
(declare-fun Po (o) P)
(declare-fun %Po (P) o)
(declare-fun Poly%lib!kv.kvspec_t.TrustedKvPermission. (lib!kv.kvspec_t.Tr) P)
(declare-fun %Poly%lib!kv.kvspec_t.TrustedKvPermission. (P) lib!kv.kvspec_t.Tr)
(declare-fun Poly%lib!kv.kvspec_t.AbstractKvStoreState. (lib!kv.kvspec_t.AbstractKvStoreState.) P)
(declare-fun %%apply%%0 (%% P) P)
(declare-fun tr_bound%core!clone.Clone. (D T) Bool)
(declare-fun tr_bound%core!fmt.Debug. (D T) Bool)
(declare-fun tr_bound%core!cmp.Eq. (D T) Bool)
(declare-fun tr_bound%core!hash.Hash. (D T) Bool)
(declare-fun tr_bound%lib!kv.durable.durableimpl_v.DurableKvStore. (D T D T D T D T D T D T) Bool)
(declare-fun tr_bound%lib!kv.kvimpl_t.Item. (D T D T) Bool)
(declare-fun tr_bound%lib!pmem.pmemspec_t.PersistentMemoryRegions. (D T) Bool)
(declare-fun tr_bound%lib!pmem.pmcopy_t.PmCopy. (D T) Bool)
(declare-fun i (D T D T D T D T D T D T P P) P)
(declare-fun l (D T) o)
(declare-fun lib!pmem.wrpm_t.CheckPermission.check_permission.? (D T D T P P) P)
(assert (fuel_bool_default fuel%lib!kv.kvspec_t.impl&%0.check_permission.))
(assert (forall ((PM&. D) (PM& T) (K&. D) (K& T) (I&. D) (I& T) (L&. D) (L& T) (D&. D) (D& T) (E&. D) (E& T) (s P) (state! P)) (! (=> (and (tr_bound%lib!pmem.pmemspec_t.PersistentMemoryRegions. PM&. PM&) (tr_bound%core!hash.Hash. K&. K&) (tr_bound%core!cmp.Eq. K&. K&) (tr_bound%core!clone.Clone. K&. K&) (tr_bound%lib!pmem.pmcopy_t.PmCopy. K&. K&) (tr_bound%core!fmt.Debug. K&. K&) (tr_bound%lib!pmem.pmcopy_t.PmCopy. I&. I&) (tr_bound%lib!kv.kvimpl_t.Item. I&. I& K&. K&) (tr_bound%core!fmt.Debug. I&. I&) (tr_bound%lib!pmem.pmcopy_t.PmCopy. L&. L&) (tr_bound%core!fmt.Debug. L&. L&) (tr_bound%lib!kv.durable.durableimpl_v.DurableKvStore. D&. D& PM&. PM& K&. K& I&. I& L&. L& E&. E&) (tr_bound%core!fmt.Debug. E&. E&)) (= (lib!pmem.wrpm_t.CheckPermission.check_permission.? $ (TYPE%lib!kv.kvspec_t.TrustedKvPermission. PM&. PM& K&. K& I&. I& L&. L& D&. D& E&. E&) $ (TYPE%vstd!seq.Seq. $ (TYPE%vstd!seq.Seq. $ (UINT 8))) s state!) (%%apply%%0 (lib!kv.kvspec_t.TrustedKvPermission./TrustedKvPermission/is_state_allowable (%Poly%lib!kv.kvspec_t.TrustedKvPermission. s)) state!))) :pattern ((lib!pmem.wrpm_t.CheckPermission.check_permission.? $ (TYPE%lib!kv.kvspec_t.TrustedKvPermission. PM&. PM& K&. K& I&. I& L&. L& D&. D& E&. E&) $ (TYPE%vstd!seq.Seq. $ (TYPE%vstd!seq.Seq. $ (UINT 8))) s state!)))))
(declare-const PM&. D)
(declare-const PM& T)
(declare-const K&. D)
(declare-const K& T)
(declare-const I&. D)
(declare-const I& T)
(declare-const L&. D)
(declare-const L& T)
(declare-const D&. D)
(declare-const D& T)
(declare-const E&. D)
(declare-const E& T)
(declare-const perm! lib!kv.kvspec_t.Tr)
(declare-const kv_id! Int)
(declare-const state! lib!kv.kvspec_t.AbstractKvStoreState.)
(assert (tr_bound%lib!kv.durable.durableimpl_v.DurableKvStore. D&. D& PM&. PM& K&. K& I&. I& L&. L& E&. E&))
(declare-fun %%lambda%%3 (D T D T D T D T D T D T P c) %%)
(assert (forall ((% D) (%% T) (h D) (%h T) (%%hole%%4 D) (%%hole%%5 T) (%%hole%%6 D) (%%hole%%7 T) (%%hole%%8 D) (%%hole%%9 T) (%%hole%%10 D) (%%hole%%11 T) (%%hole%%12 P) (%%hole%%13 c) (s P)) (! (= (%%apply%%0 (%%lambda%%3 D&. D& h PM& K&. K& I&. I& L&. L& E&. E& %%hole%%12 %%hole%%13) s) (B (= %%hole%%13 (o (i D&. D& h PM& K&. K& I&. I& L&. L& E&. E& s %%hole%%12))))) :pattern ((%%apply%%0 (%%lambda%%3 % %% h %h %%hole%%4 %%hole%%5 %%hole%%6 %%hole%%7 %%hole%%8 %%hole%%9 %%hole%%10 %%hole%%11 %%hole%%12 %%hole%%13) s)))))
(assert (not (=> (= perm! (lib!kv.kvspec_t.TrustedKvPermission./TrustedKvPermission (%P (P (%%lambda%%3 D&. D& PM&. PM& K&. K& I&. I& L&. L& E&. E& (I kv_id!) (core!option.Option./Some (Poly%lib!kv.kvspec_t.AbstractKvStoreState. state!))))) (%Po (Po (l PM&. (TYPE%lib!kv.kvspec_t.TrustedKvPermission. PM&. PM& PM&. PM& PM&. PM& PM&. PM& PM&. PM& PM&. PM&)))))) (forall ((s P)) (! (= (= (core!option.Option./Some (Poly%lib!kv.kvspec_t.AbstractKvStoreState. state!)) (o (i D&. D& PM&. PM& K&. K& I&. I& L&. L& E&. E& s (I kv_id!)))) (% (lib!pmem.wrpm_t.CheckPermission.check_permission.? $ (TYPE%lib!kv.kvspec_t.TrustedKvPermission. PM&. PM& K&. K& I&. I& L&. L& D&. D& E&. E&) $ (TYPE%vstd!seq.Seq. $ (TYPE%vstd!seq.Seq. $ (UINT 8))) (Poly%lib!kv.kvspec_t.TrustedKvPermission. perm!) s))) :pattern ((lib!pmem.wrpm_t.CheckPermission.check_permission.? $ (TYPE%lib!kv.kvspec_t.TrustedKvPermission. PM&. PM& K&. K& I&. I& L&. L& D&. D& E&. E&) $ (TYPE%vstd!seq.Seq. $ (TYPE%vstd!seq.Seq. $ (UINT 8))) (Poly%lib!kv.kvspec_t.TrustedKvPermission. perm!) s)))))))
(assert (= (%%lambda%%3 D&. D& PM&. PM& K&. K& I&. I& L&. L& E&. E& (I kv_id!) (core!option.Option./Some (Poly%lib!kv.kvspec_t.AbstractKvStoreState. state!))) (%P (P (mk_fun (%%lambda%%3 D&. D& PM&. PM& K&. K& I&. I& L&. L& E&. E& (I kv_id!) (core!option.Option./Some (Poly%lib!kv.kvspec_t.AbstractKvStoreState. state!))))))))
(assert (and (tr_bound%lib!pmem.pmemspec_t.PersistentMemoryRegions. PM&. PM&) (tr_bound%core!hash.Hash. K&. K&) (tr_bound%core!cmp.Eq. K&. K&) (tr_bound%core!clone.Clone. K&. K&) (tr_bound%lib!pmem.pmcopy_t.PmCopy. K&. K&) (tr_bound%core!fmt.Debug. K&. K&) (tr_bound%lib!pmem.pmcopy_t.PmCopy. I&. I&) (tr_bound%core!fmt.Debug. I&. I&) (tr_bound%lib!pmem.pmcopy_t.PmCopy. L&. L&) (tr_bound%core!fmt.Debug. L&. L&) (tr_bound%core!fmt.Debug. E&. E&) (tr_bound%lib!kv.kvimpl_t.Item. I&. I& K&. K&)))
(assert (= (lib!kv.kvspec_t.TrustedKvPermission./TrustedKvPermission/is_state_allowable (%Poly%lib!kv.kvspec_t.TrustedKvPermission. (Poly%lib!kv.kvspec_t.TrustedKvPermission. perm!))) (lib!kv.kvspec_t.TrustedKvPermission./TrustedKvPermission/?is_state_allowable (%Poly%lib!kv.kvspec_t.TrustedKvPermission. (Poly%lib!kv.kvspec_t.TrustedKvPermission. perm!)))))
(declare-const !!skolem_variable_0 P)
(assert (= (fuel_bool fuel%lib!kv.kvspec_t.impl&%0.check_permission.) (fuel_bool_default fuel%lib!kv.kvspec_t.impl&%0.check_permission.)))
(assert (= (mk_fun (%%lambda%%3 D&. D& PM&. PM& K&. K& I&. I& L&. L& E&. E& (I kv_id!) (core!option.Option./Some (Poly%lib!kv.kvspec_t.AbstractKvStoreState. state!)))) (%%lambda%%3 D&. D& PM&. PM& K&. K& I&. I& L&. L& E&. E& (I kv_id!) (core!option.Option./Some (Poly%lib!kv.kvspec_t.AbstractKvStoreState. state!)))))
(assert (= perm! (%Poly%lib!kv.kvspec_t.TrustedKvPermission. (Poly%lib!kv.kvspec_t.TrustedKvPermission. perm!))))
(assert (=> (and (tr_bound%lib!pmem.pmemspec_t.PersistentMemoryRegions. PM&. PM&) (tr_bound%core!hash.Hash. K&. K&) (tr_bound%core!cmp.Eq. K&. K&) (tr_bound%core!clone.Clone. K&. K&) (tr_bound%lib!pmem.pmcopy_t.PmCopy. K&. K&) (tr_bound%core!fmt.Debug. K&. K&) (tr_bound%lib!pmem.pmcopy_t.PmCopy. I&. I&) (tr_bound%lib!kv.kvimpl_t.Item. I&. I& K&. K&) (tr_bound%core!fmt.Debug. I&. I&) (tr_bound%lib!pmem.pmcopy_t.PmCopy. L&. L&) (tr_bound%core!fmt.Debug. L&. L&) (tr_bound%lib!kv.durable.durableimpl_v.DurableKvStore. D&. D& PM&. PM& K&. K& I&. I& L&. L& E&. E&) (tr_bound%core!fmt.Debug. E&. E&)) (= (lib!pmem.wrpm_t.CheckPermission.check_permission.? $ (TYPE%lib!kv.kvspec_t.TrustedKvPermission. PM&. PM& K&. K& I&. I& L&. L& D&. D& E&. E&) $ (TYPE%vstd!seq.Seq. $ (TYPE%vstd!seq.Seq. $ (UINT 8))) (Poly%lib!kv.kvspec_t.TrustedKvPermission. perm!) !!skolem_variable_0) (%%apply%%0 (lib!kv.kvspec_t.TrustedKvPermission./TrustedKvPermission/is_state_allowable (%Poly%lib!kv.kvspec_t.TrustedKvPermission. (Poly%lib!kv.kvspec_t.TrustedKvPermission. perm!))) !!skolem_variable_0))))
(assert (= perm! (%Poly%lib!kv.kvspec_t.TrustedKvPermission. (Poly%lib!kv.kvspec_t.TrustedKvPermission. perm!))))
(assert (=> (and (tr_bound%lib!pmem.pmemspec_t.PersistentMemoryRegions. PM&. PM&) (tr_bound%core!hash.Hash. K&. K&) (tr_bound%core!cmp.Eq. K&. K&) (tr_bound%core!clone.Clone. K&. K&) (tr_bound%lib!pmem.pmcopy_t.PmCopy. K&. K&) (tr_bound%core!fmt.Debug. K&. K&) (tr_bound%lib!pmem.pmcopy_t.PmCopy. I&. I&) (tr_bound%lib!kv.kvimpl_t.Item. I&. I& K&. K&) (tr_bound%core!fmt.Debug. I&. I&) (tr_bound%lib!pmem.pmcopy_t.PmCopy. L&. L&) (tr_bound%core!fmt.Debug. L&. L&) (tr_bound%lib!kv.durable.durableimpl_v.DurableKvStore. D&. D& PM&. PM& K&. K& I&. I& L&. L& E&. E&) (tr_bound%core!fmt.Debug. E&. E&)) (= (lib!pmem.wrpm_t.CheckPermission.check_permission.? $ (TYPE%lib!kv.kvspec_t.TrustedKvPermission. PM&. PM& K&. K& I&. I& L&. L& D&. D& E&. E&) $ (TYPE%vstd!seq.Seq. $ (TYPE%vstd!seq.Seq. $ (UINT 8))) (Poly%lib!kv.kvspec_t.TrustedKvPermission. perm!) !!skolem_variable_0) (%%apply%%0 (lib!kv.kvspec_t.TrustedKvPermission./TrustedKvPermission/is_state_allowable (%Poly%lib!kv.kvspec_t.TrustedKvPermission. (Poly%lib!kv.kvspec_t.TrustedKvPermission. perm!))) !!skolem_variable_0))))
(assert (=> (and (tr_bound%lib!pmem.pmemspec_t.PersistentMemoryRegions. PM&. PM&) (tr_bound%core!hash.Hash. K&. K&) (tr_bound%core!cmp.Eq. K&. K&) (tr_bound%core!clone.Clone. K&. K&) (tr_bound%lib!pmem.pmcopy_t.PmCopy. K&. K&) (tr_bound%core!fmt.Debug. K&. K&) (tr_bound%lib!pmem.pmcopy_t.PmCopy. I&. I&) (tr_bound%lib!kv.kvimpl_t.Item. I&. I& K&. K&) (tr_bound%core!fmt.Debug. I&. I&) (tr_bound%lib!pmem.pmcopy_t.PmCopy. L&. L&) (tr_bound%core!fmt.Debug. L&. L&) (tr_bound%lib!kv.durable.durableimpl_v.DurableKvStore. D&. D& PM&. PM& K&. K& I&. I& L&. L& E&. E&) (tr_bound%core!fmt.Debug. E&. E&)) (= (lib!pmem.wrpm_t.CheckPermission.check_permission.? $ (TYPE%lib!kv.kvspec_t.TrustedKvPermission. PM&. PM& K&. K& I&. I& L&. L& D&. D& E&. E&) $ (TYPE%vstd!seq.Seq. $ (TYPE%vstd!seq.Seq. $ (UINT 8))) (Poly%lib!kv.kvspec_t.TrustedKvPermission. perm!) !!skolem_variable_0) (%%apply%%0 (lib!kv.kvspec_t.TrustedKvPermission./TrustedKvPermission/is_state_allowable (%Poly%lib!kv.kvspec_t.TrustedKvPermission. (Poly%lib!kv.kvspec_t.TrustedKvPermission. perm!))) !!skolem_variable_0))))
(check-sat)
