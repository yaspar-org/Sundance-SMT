(declare-sort % 0)
(declare-sort P 0)
(declare-fun I (Int) P)
(declare-fun h (P) Bool)
(declare-fun e (P) Bool)
(declare-sort vs 0)
(declare-sort b! 0)
(declare-datatypes ((b 0)) (((i (ib vs)))))
;(declare-sort b 0)
;(declare-fun i (vs) b)
;(declare-fun ib (b) vs)
(declare-fun b (b!) Int)
(declare-fun P () P)
(declare-fun o (vs) P)
(declare-fun %P (P) vs)
(declare-fun Po (b) P)
(declare-fun %Po (P) b)
(declare-fun ol (b!) P)
(declare-fun Pol (P) b!)
(assert (forall ((x P)) (! (= x (o (%P x))) :pattern ((h x)))))
(assert (forall ((x b)) (! (= x (%Po (Po x))) :pattern ((Po x)))))
(assert (forall ((r vs)) (! (h (Po (i r))) :pattern ((Po (i r))))))
(declare-fun v (P) P)
(declare-fun vs (P) P)
(declare-fun li (P P) vs)
(assert (forall ((f P)) (! (h (vs f)) :pattern ((vs f)))))
(declare-fun % () %)
(assert (forall ((t P) (e P)) (! (= (li t e) (%P (vs P))) :pattern ((li t e)))))
(assert (forall ((s P)) (! (= (v s) (Po (i (%P (o (li (I 0) (I (b (Pol s))))))))) :pattern ((v s)))))
(declare-const s b!)
(declare-const se b!)
(assert (e (o (ib (%Po (v (ol s)))))))
(assert (not (h (o (ib (%Po (v (ol se))))))))
(check-sat)
