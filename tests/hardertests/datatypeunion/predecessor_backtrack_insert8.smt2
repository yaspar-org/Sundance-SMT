(declare-sort %% 0)
(declare-sort P 0)
(declare-fun B (Bool) P)
(declare-fun % (P) Bool)
(declare-sort T 0)
(declare-const O T)
(declare-sort D 0)
(declare-const $ D)
(declare-fun h (P T) Bool)
(declare-fun m (P) P)
(assert (forall ((x Bool)) (! (= x (% (B x))) :pattern ((B x)))))
(declare-sort a 0)
(declare-sort td 0)
(declare-sort s 0)
(declare-sort vs 0)
(declare-datatypes ((c 0) (st 0) (vst 0) (li 0) (lib 0) (l 0) (lib! 0) (!d 0) (ib! 0) (!k 0) (b! 0)) (((c) (co (tor vs))) ((vst (std s))) ((vstd (d! st))) ((lib!)) ((b!d (ib!d li) (lib!d a))) ((f (de lib))) ((e)) ((!de (b!de td))) ((!i (b!i b!))) ((b!k (ib!k c))) ((lib!k (k !k) (ke !k)))))
(declare-fun ib! (b!) !k)
(declare-fun !k (b!) !k)
(declare-fun Y (D T D T) T)
(declare-const TY T)
(declare-const T T)
(declare-fun P (%%) P)
(declare-fun %P (P) %%)
(declare-fun oly () P)
(declare-fun y (!k) P)
(declare-fun Po (P) !k)
(declare-fun ol () P)
(declare-fun ly (P) b!)
;(assert (forall ((x %%)) (! (= x (%P (P x))) :pattern ((P x)))))
(declare-fun %% (%% P) P)
(assert (forall ((T0 D) (% T) (T% D) (%1 T) (x %%)) (! (exists ((T1 P)) (! (not (h (%% x oly) TY)) :pattern ((%% x T1)))) :pattern ((h (P x) (Y T0 % T% %1))))))
(assert (forall ((x !k)) (! (= x (Po (y x))) :pattern ((y x)))))
(assert (forall ((x b!)) (! (= (ib! x) (k x)) :pattern ((ib! x)))))
(assert (forall ((x b!)) (! (= (!k x) (ke x)) :pattern ((ib! x)))))
(declare-fun v () P)
(declare-fun s (D T P P) Bool)
(declare-fun vs (D T D T P P) P)
(declare-fun st (D T D T P) P)
(declare-fun td () P)
(declare-fun lib (D T P P P) Bool)
(declare-fun ib (D T P) !k)
(declare-fun li (D T P P) Bool)
;(assert (forall ((& D) (K T) (. D) (V T) (s P) (ke P)) (! (or (h (vs . T . V s s) V)) :pattern ((vs & K . V s ke)))))
;(assert (forall ((& D) (A T) (f P) (a P)) (! (= (% (%% (%P f) oly)) (s & T (st & T & (Y & T & O) f) a)) :pattern ((s & T (st & T & (Y & A & O) f) a)))))
(assert (forall ((& D) (K T) (s P) (k P)) (! (= (li & T s k) (lib & T (y (ib! (ly s))) (y (ib & TY s)) (y (!k (ly s))))) :pattern ((li & K s k)))))
(declare-fun %l (D T P D T D T P D T D T P) %%)
;(assert (forall ((% D) (h T) (%h P) (%%h D) (o T) (ho D) (%ho T) (%%ho P) (ol D) (hol T) (%hol D) (%%hol T) (e P) (k P)) (! (= (%% (%l ol T %h ol T ol TY %%ho ol T ol TY e) k) (ite (s ol T %h k) (vs ol TY ol h oly k) (vs ol T ol TY k k))) :pattern ((%% (%l % h %h %%h o ho %ho %%ho ol hol %hol %%hol e) k)))))
(declare-fun a (D T P) %%)
(assert (forall ((% D) (h T) (%h P) (k P)) (! (= (%% (a % T %h) k) (B (li % T %h k))) :pattern ((%% (a % h %h) k)))))
(declare-const l !k)
(declare-const i !k)
(assert (forall ((k P)) (! (not (lib $ T (y l) k (y i))) :pattern ((lib $ T (y l) k (y l))))))
(assert (= (lib!k (Po (y l)) (Po (y i))) (ly ol)))
(assert (= v (st $ T $ (Y $ T $ O) (P (a $ T ol)))))
(assert (and (h (P (%l $ T v $ T $ TY td $ T $ TY oly)) (Y $ TY $ TY))))

(assert (= (a $ T ol) (%P (P (a $ T ol)))))
(assert (= (%l $ T v $ T $ TY td $ T $ TY oly) (%P (P (%l $ T v $ T $ TY td $ T $ TY oly)))))
;(assert (exists ((T1 P)) (! (not (h (%% (%l $ T v $ T $ TY td $ T $ TY oly) oly) TY)) :pattern ((%% (%l $ T v $ T $ TY td $ T $ TY oly) T1)))))
(assert (= l (Po (y l))))
(assert (= (%% (%l $ T v $ T $ TY td $ T $ TY oly) oly) (ite (s $ T v oly) (vs $ TY $ T oly oly) (vs $ T $ TY oly oly))))
(assert (or (h (vs $ T $ T oly oly) T)))
(assert (or (h (vs $ T $ TY oly oly) TY)))
(assert (= (% (%% (%P (P (a $ T ol))) oly)) (s $ T (st $ T $ (Y $ T $ O) (P (a $ T ol))) oly)))
(assert (= (%% (a $ T ol) oly) (B (li $ T ol oly))))
;(assert (not (h (%% (%l $ T v $ T $ TY td $ T $ TY oly) oly) TY)))
;(assert (= (li $ T ol oly) (% (B (li $ T ol oly)))))
;(assert (= (li $ T ol oly) (lib $ T (y (ib! (ly ol))) (y (ib $ TY ol)) (y (!k (ly ol))))))
;(assert (= (ib! (ly ol)) (k (ly ol))))
;(assert (= (!k (ly ol)) (ke (ly ol))))
;(assert (not (lib $ T (y l) (y (ib $ TY ol)) (y i))))
(check-sat)
